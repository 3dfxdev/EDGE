
CHANGELOG FOR 1.31-ALPHA (since 1.29)
=====================================

Bugs fixed
----------

+ glitches/small gaps between polygons are fixed.
+ crash with Scuba Steve's flamethrow DEH patch.

- ID(K)FA cheats now give clip weapons full ammo.
- fixed problem saving the 'mipmapping' setting.
- custom sky-boxes should always be used when present.
- fix for filenames (like "foo.bar.wad") containing two dots.
- proper test for existing titlepics in GAMES.DDF.
- fixed console PLAYSOUND cmd when sound is not found.
- no sprite check for spawned map-things (easier debugging).
- fixed badly synchronised flash state of super-shotgun.


Features removed
----------------


General improvements
--------------------

+ new method to emulate DOOM's lighting model.

+ new dynamic lighting,   @@@
  DLIGHT2
  LEAKY
  RADIUS not INTENSITY
  MODULATE and ADD (instead of QUADRATIC and LINEAR)

+ improved sky emulation, replacing all the 'SKY STRETCH' options
  with a single mode based on the old MIRROR mode, but tweaked for
  better compatibility with existing DOOM skies.  The old ORIGINAL
  mode now kicks in automatically when MLOOK is disabled.

- better gamma handling (now done by the video driver).
- more robust emulation of the flat-flooding trick.
- better way to gauge the player's actual speed.
- console key is configurable.


New features:
-------------

+ MD2 models  @@@@
    '@123' syntax for frames
    MODEL_SKIN command
    SET_SKIN() action


+ mirrors   @@@

- sector glow effects.  Using one of these commands:

  GLOW_TYPE=FLOOR;
  GLOW_TYPE=CEILING;

  in conjunction with the DLIGHT commands means that the
  dynamic light is transformed into a floor or ceiling glow.
  The brightness and range of the lighting can be adjusted as
  per normal dynamic lights.  The glow is limited to a single
  sector.

- TGA images are now supported by IMAGES.DDF.  So far only RGB
  mode (uncompressed and RLE) TGA images are supported.
  Colormapped images are planned for the full release.

- flat align/scale linetypes  @@@


DDF / RTS Goodies:
------------------

+ new WEAKNESS feature allows a monster to receive more damage
  from certain attacks than others.  You can also specify a zone
  where the monster must be hit (when hit in other places, the
  weakness does not apply).  The weakness zone can be a height
  range (in percentages) and/or an angle range (in degrees).

  The weakness feature requires 'WEAKNESS.CLASS' to be present,
  specifying what attack classes the monster is weak against.
  Note that it will also _override_ any IMMUNITY or RESISTANCE
  that the monster has (except for the INVULNERABLE special).

  The following example shows all the commands.  Everything
  except 'WEAKNESS.CLASS' is optional.

    WEAKNESS.CLASS=ABC;
    WEAKNESS.HEIGHTS=75%:100%;
    WEAKNESS.ANGLES=150:210;
    WEAKNESS.MULTIPLY=3.0;
    WEAKNESS.PAINCHANCE=100%;

  When a thing is hurt via the weakness feature, it will try to
  enter 'WEAKPAIN' states, but if it doesn't have them then the
  normal PAIN states are used.

  When a thing is killed, it will try to enter 'WEAKDEATH' states,
  but if they don't exist then it will try OVERKILL states, and
  finally it falls back to the normal DEATH states.

+ BECOME action for THINGS.DDF allows a thing to turn into another
  type of thing.  Can be used on players too.  Health and Side
  values remain the same.  The new state frame can also be given
  (the default is IDLE:1).  Examples:

    BECOME(CACODEMON)
    BECOME(CACODEMON,CHASE:2)

  Note that becoming something larger (i.e. bigger RADIUS) can
  cause the thing to get stuck in walls or other objects.

+ armour association feature.  When you pick up some armour, and
  the thing DDF uses the ARMOUR_PROTECTION command, then various
  properties are remembered for that color of armour.  This new
  ARMOUR_PROTECTION command is the percentage of damage which is
  saved by the armour (100% for all) which overrides the default
  protection rates (e.g. BLUE is normally 50%).
  
  Summary of armour-assocation commands:

    ARMOUR_PROTECTION=99%; // high protection
    ARMOUR_DEPLETION=10%;  // low depletion rate
    ARMOUR_CLASS=B;        // only protects against Bullets
    IMMUNITY_CLASS=C;      // total protection from Close-Combat
    RESISTANCE_CLASS=M;    // resistance against Missiles

  Note: ARMOUR_CLASS overrides the immunity/resistance classes,
  so the above example would fail to provide any immunity or
  resistance because 'C' and 'M' are not in ARMOUR_CLASS. 

- PURPLE armour was added, bringing the number of armours to 5.
  The default protection is 66%, and the layering order (from
  innermost to outermost) is: BLUE, GREEN, PURPLE, YELLOW, RED.

- SIMPLE_ARMOUR special for armour pickups.  It prevents the
  wacky Doom-emulation from kicking in.

- three new armour things were added to EDGE.WAD for people to
  use in their maps:

    [7031] : PURPLE_ARMOUR
    [7032] : YELLOW_ARMOUR
    [7033] : RED_ARMOUR

- SPAWN action is similar to DROPITEM action, but it doesn't
  force the object to be non-SOLID like DROPITEM does, plus the
  spawned object will have the same Angle and Side as the parent
  object.  The name must be given in brackets, e.g. SPAWN(IMP).

- INVULNERABLE special makes the thing completely immune to
  all attacks.  There are also two new actions to dynamically
  change it: SET_INVULNERABLE and CLEAR_INVULNERABLE, which
  can be used to make monsters with blocking states (like the
  Centaurs in Hexen).

- DLIGHT_COLOUR(#FF00FF) action will change the color of the
  dynamic light.  Note: the secondary dlight, if used, is not
  affected.

- for object brightness, LIT00 - LIT99 can be used in state
  frames instead of the keywords 'NORMAL' and 'BRIGHT'.
  This allows fine-grained control for dynamic lights.

- the existing RESISTANCE_CLASS feature has been supplemented by
  a new RESISTANCE_MULTIPLY command which lets you control how
  much to multiply the damage caused.  The default is 0.4 which
  matches the previously hard-coded value.  Values over 1.0 can
  be used (makes it a weakness instead of resistance).

  Also RESISTANCE_PAINCHANCE can give a different (typically
  lower) chance of entering the pain states from a resistance
  attack.
 
- VAMPIRE attack special and thing special (for monsters and
  players) which causes the inflictor of damage to gain the
  health from the damage done to the victim.  The health/damage
  ratio is hard-coded as 25% for monsters and 50% for players.

- new player states: JUMP, FLY, SWIM, CLIMB.   @@@@
  CHECK_ACTIVITY

- SHARED_CLIP=TRUE for WEAPONS.DDF means that the primary and
  secondary attacks are using a single (shared) clip.  Hence
  you cannot use SEC_AMMOTYPE, SEC_AMMOPERSHOT or SEC_CLIPSIZE
  commands when using SHARED_CLIP.  There can only be a single
  reload animation (SECRELOAD states will be ignored).

  You should use SEC_SHOOT, SEC_REFIRE and SEC_NOFIRE actions
  in your SECATTACK states, and you may have SECFLASH states.

- FLOOR.CRUSH_DAMAGE and CEILING.CRUSH_DAMAGE is the new and
  preferred way for making crushers in LINES.DDF.  It gives the
  amount of damage when crushing (the rate of damage is still
  hard-coded to be every 4 tics).

- some LADDER linetypes were added to EDGE.WAD:

    [470] // EDGE Ladder,  48 units high
    [471] // EDGE Ladder,  80 units high
    [472] // EDGE Ladder, 120 units high
    [473] // EDGE Ladder, 160 units high
    [474] // EDGE Ladder, 192 units high
    [475] // EDGE Ladder, 256 units high
    [476] // EDGE Ladder, 384 units high
    [477] // EDGE Ladder, 512 units high
    [478] // EDGE Ladder, 768 units high
    [479] // EDGE Ladder, no limit

- Weapons.ddf: allow 'SEC_ATTACK' to mean 'SECOND_ATTACK' for
  consistency with all the other SEC_XXX commands.

- RTS 'WHEN=xxx' tag for SPAWNTHING commands.

