
CHANGELOG FOR 1.29 (since 1.28)
===============================

(Date: DECEMBER 14th 2004)


Bugs fixed
----------

+ crash loading a savegame with dynamic lights when D/L disabled.
+ fixed crash when starting a level in deathmatch mode.
+ quotes (") usable in response files (for filenames with spaces).

- Arch-vile no longer resurrects monsters into itself.
- don't display "Entering" on intermission when map is last one.
- fix for ONCONDITION <weapon> in RTS scripts.
- fix for teleport on MAP06 (going to wrong place).
- boss brain can now be hurt from rocket explosions.
- DDF parser will catch angles > 360 degrees.
- watching a moving monster while dead is now smoother.
- allow KEY_GREENCARD and KEY_GREENSKULL in DDF.
- texture vertical mis-alignment in some rare cases fixed.
- berserk strength now lasts the whole level.
- night vision wasn't affecting the sky, fixed.
- damage over 1000 no longer hurts invulnerable players.
- monsters on different sides now attack each other.  (UNTESTED)
- problems mlooking up/down while zoomed are fixed.
- sides of extrafloors would not scroll properly, fixed.


Old Fixes (from EDGE 1.28A)
---------------------------

+ Windows 95 support.
+ fix the crouching bug.

- look for patch lumps first in between P_START/P_END.
- handle ALT+TAB better under Windows.
- handle non-power-of-two textures in GL mode.
- allow brain-shooter without any shoot spots (Darren Salt).
- allow compiling without DEVELOPERS define (Darren Salt).
- fix for some memory trashing problems (Darren Salt).


Features removed / changed
--------------------------

+ software rendering has been removed.  We don't have the time to
  maintain the software renderer anymore, and keeping two renderers
  means that adding new features (like slopes and models) needs
  twice as much work (if not more -- doing things with OpenGL is
  usually a lot easier than doing it with software).

+ the demo format has changed, and previously recorded demos don't
  work in this version of EDGE.  @@@ The current demo code has not
  been tested and may not work properly.

- using { } comments in DDF files, and ';' comments in RTS scripts
  is now deprecated, since these characters will probably be needed
  in the future when improving DDF/RTS.  Use // comments instead.

- the DDF "CONSTANT" dynamic lighting type was removed.


General improvements
--------------------

+ drag and drop support.  You no longer have to use the -file option
  to specify filenames (wad files etc).  Everything before the first
  option is considered a filename to add.  This allows you to drag a
  (self-contained) WAD onto the EDGE executable to play it.

(NOT FINISHED) new sound system, using OpenAL (a 3D audio library). 

(ALMOST FINISHED) support for OGG Vorbis Music playing.  @@@

(NOT FINISHED) good music support under Linux. @@@

+ native support for DeHackEd and BEX patches, both as normal files
  (with .DEH or .BEX extension), and also as DEHACKED lump in a wad.
  Patch files can be added with the -deh option (like in other Doom
  engines).  EDGE converts the patches to DDF, and stores the result
  in files with the .HWA extension, which are loaded automatically.

- ability to use 24-bit screen modes (16.7 million colours).

- new startup, with progress bar.  The console window that used to
  appear (Win32) is gone, and under Linux messages are no longer
  printed to the terminal.  When GL-Nodes must be built for a wad,
  this is also done during startup.

- Linux: fatal errors produce a pop-up dialog box.  EDGE can now be
  run by double clicking the executable.  Support for CD music.

- support V3 of GL-NODES.  EDGE now includes glBSP 2.10, which can
  handle very complex levels (which overflow the old limits), e.g.
  Deus Vult MAP05.

- a small improvement to Boom compatibility: line-to-line teleporters
  and the platform toggle linetypes were added.

- source code uses more C++ features, and more of the EPI (Edge Platform
  Interface).  The "Zone" memory manager has mostly been replaced.

- new gameplay option to disable automatic weapon switches.
- sky looks a bit better, with a stretch option in Video menu.
- the old "sky flooding" trick is now emulated.
- emulate the FRIEND bit on things in the map.
- missing wad files (given with -file) now produce an error.
- monster spawning will keep the parent's AMBUSH status.
- night vision and god-mode effects use colour from colourmap.
- RTS tips are sent to the console.


New DDF features:
-----------------

+ new IMAGES.DDF file.  The corresponding wad lump is DDFIMAGE.  You
  can define any type of images in this file (textures, flats, sprites
  and screen patches), and they will override any from the WAD file
  with the same name.  There are three supported types so far: solid
  colours, image files, and built-in types, as follows:

     IMAGE_DATA = COLOUR:#FF7F00;
     IMAGE_DATA = FILE:"retex\startan3.png";
     IMAGE_DATA = BUILTIN:QUADRATIC;

  The built-in types are only used to create special images for
  dynamic lighting and shadows.  The FILE type is the most useful,
  and currently supports PNG images (JPEG format is planned for the
  future).  The following commands are also available:

     X_OFFSET = 10;  // specify the X and Y offset, e.g. sprites.
     Y_OFFSET = 30;  //

     SCALE  = 2.0;   // scaling and aspect.  Bigger scale makes the
     ASPECT = 1.0;   // image bigger (cover more space).  Bigger aspect
                     // makes the image wider (height is unchanged).

     SPECIAL = XXX, YYY;

  The current specials are not very useful in general (e.g. sprite
  images are automatically clamped).  They are:

     NOMIP    // force mipmapping to be disabled
     SMOOTH   // force smoothing to be enabled
     CLAMP    // force clamping (image cannot repeat)

+ new FONTS.DDF file.  The equivalent wad lump is DDFFONT.  This is used
  to define fonts (the set of character images for drawing text).  The
  following example shows the available features:

    [FOO]
    TYPE=PATCH;   // PATCH is the only type so far
    PATCHES=FONTP33("!"),  // put a character in "" quotes
            FONTP65("A":"Z");   // use : for a range of characters
    MISSING_PATCH=FONTP00;

  where the FONTPxx names above are the patch names.  For ranges it
  is the first patch, and should end with digits in order for EDGE
  to work out the other patches properly (FONTP66 will be "B", etc).
  The missing patch is optional.  Having a patch for a space (" ")
  is also optional.

+ new STYLES.DDF file.  The equivalent wad lump is DDFSTYLE.  This is
  used to define styles: these define the background colour/image and
  the text font/colour/scaling information and also sounds.  Most parts
  of the EDGE user interface can be changed using styles, e.g. the
  console has a corresponding style called [CONSOLE].

  Some styles are available for use, but are not defined in our own
  STYLES.DDF.  E.g. [VIDEO_OPTIONS].  When absent, they fall back to
  more general styles: [MENU] for menu screens, and [OPTIONS] for
  option screens.  This allows you to keep these screens consistent,
  since you can change them all by only editing a single style.

  @@@

- RELOAD states for monsters.  This is controlled by the new command
  RELOAD_SHOTS and the new action RELOAD_CHECK, which tests if the
  monster needs to reload, and if yes then enters its RELOAD states.
  For players, RELOAD states are used whenever the weapon reloads.
  They are optional though.

- new SEQUENCE command for ANIMS.DDF.  Use it to specify the full
  animation sequence.  Names cannot be used twice.  For example:

    SEQUENCE = TEX1, TEX2, TEX3, TEX5, TEX8;
 
- PICKUP_EFFECT = SWITCH_WEAPON(xxx) , required for #VERSION 1.29 and
  higher.  Berserk fist.  Compatibility maintained. @@@

- ULTRA_LOYAL thing special.  Friendly monsters don't turn into enemies
  when hurt by your weapon fire.

- SIDE_IMMUNE thing special.  Friendly monsters are completely immune
  from your weapon fire.

- EXPLODE_RADIUS command for things and attacks.  Normally the explosion
  radius is the same as the damage caused, but this command forces the
  explosion radius to a particular value (e.g. 200).  The amount of
  damage is not affected.

- EXPLODE_IMMUNE and ALWAYS_LOUD thing specials.  These attributes
  are both set by the BOSSMAN special, but now they can be specified
  individually.

- SILENT_TO_MONSTERS is now an attack special too.
- FORCE_PICKUP special for thing.ddf (items).
- DIE action for things and attacks (mainly for BEX compatibility).

- WHEN_APPEAR in DDF and RTS now accepts simpler values.  You can
  use a range for the skill (e.g. "3-5"), you can omit the skill or
  the netmode part (e.g. "DM" means deathmatch on any skill, and "3"
  means Hurt-Me-Plenty on any netmode).  Finally, you can add the '!'
  character to the beginning to negate it, e.g. "!SP" means never in
  single-player, and "!4:5" means never in skills 4 or 5.


New RTS features:
-----------------

+ new RTS menu system:

    SHOW_MENU      title option1 option2 ...
    SHOW_MENU_LDF  title option1 option2 ...
         
    JUMP_ON  MENU  label1 label2 ...

    MENU_STYLE  style_name

  The RTS menu will pause the game (including all scripts) until the user
  presses a valid number key.  Savegames are also disabled while the RTS
  menu is shown.  Once the menu is finished, the JUMP_ON command will
  test the result, and jump to the matching label.  It will fail to jump
  if there aren't enough labels, or menu could not be shown (netgame).

  The title can contain newlines (given by "\n"), to make multi-line
  titles.  Newlines don't work in the options however.  The MENU_STYLE
  command gives the style for the next SHOW_MENU command.  If you don't
  specify a style, the default style is [RTS_MENU] (or just [MENU] if
  that one doesn't exist).

- lines in RTS scripts can be extended over two (or more) actual lines
  by placing the \ character at the end.  A silly example:

     SHOW_MENU "title" \
         "option one"  \
         "option two"  \
         "option three"

  Note: there must not be any spaces after the \ character, otherwise
  it doesn't work.


New weapon stuff
----------------

+ weapon handling has been generally improved (especially the way clips
  work).  Anything using the CLIPSIZE command is considered a "clip weapon",
  and will store ammo inside of its clip, even when not selected.

+ support for manual reloading (new key in Keyboard Options).

+ Four new ammo types: DAGGERS, ARROWS, TORPEDOES, CRYSTALS (names
  inspired by Heretic/Hexen/HacX).  That brings the total to twelve.
  The limit on holdable weapons was also increased from 32 to 64.

- There are many new specials.  The following new command is used to
  give specials for the secondary attack:

    SEC_SPECIAL = xxx;

  The ones in the plain "SPECIAL" command apply to the primary attack
  (some might apply to the whole weapon).  The following specials are
  available:

    SILENT_TO_MONSTERS : don't wake up those demons
    ANIMATED           : UP and DOWN states are animated
    NO_SWITCH          : don't switch to new weapon if ammo runs out

    NO_TRIGGER   : prevent reloading by pressing fire button
    FRESH        : reload empty clip when fresh ammo is picked up
    NO_MANUAL    : disable manual reloading key
    PARTIAL      : for manual reload: allow partial clip refills

  When using the ANIMATED special, the weapon sprite doesn't raise up
  or lower down.  Instead the UP and DOWN states should show an
  animation.  The RAISE and LOWER commands must occur once, in the
  very last frame.

- There are now empty states.  These are shown (instead of ready
  states) when the primary attack runs out of ammo.  You must use
  the "EMPTY" action in the empty states, for example:

    STATES(EMPTY) = ABCD:E:1:NORMAL:EMPTY;

- There are also WARMUP and SECWARMUP states.  These will be entered
  when firing the weapon from the READY states (not for refiring).
  These states jump to the ATTACK and SECATTACK states when finished
  (i.e. you don't need #ATTACK at the end).

- Edge now supports IDLE states.  These are entered from the READY
  or EMPTY states after a certain time has elapsed.  The minimum
  time is given with the IDLE_WAIT command.  There is also an
  IDLE_CHANCE command which is the chance to enter the idle states 
  when the timer runs out.  If the timer runs out and the random
  test fails, then the timer is reset to 1/10th of IDLE_WAIT.

  For example, "IDLE_WAIT=20" means that the random test occurs
  at 20 seconds, 22 seconds, 24 seconds, and so forth, until it
  succeeds.  If the chance is 100%, is succeeds on the first try.

- Crosshair actions have been re-enabled.  The following actions
  are now available.

    SETCROSS(FRAME)    : crosshair jumps to the given frame
    TARGET_JUMP(FRAME) : crosshair jumps IF player has a target
    FRIEND_JUMP(FRAME) : crosshair jumps IF player target is a friend

  SETCROSS can be used anywhere, but TARGET_JUMP and FRIEND_JUMP
  can only be used in the crosshair states.  The old "TARGET" action
  (disabled for a long time) has been made obsolete.

- Finally, there are now DISCARD and SECDISCARD states.  They are
  similar to the PARTIAL special: if you press the reload key with
  a half-empty clip (i.e. neither empty nor full), then the clip is
  discarded and the DISCARD states are entered.  These states must
  end with the CHECKRELOAD action to cause the weapon to reload.


New command-line options:
-------------------------

  -deh     Specify a DeHackEd (or BEX) patch file.  You can have
           multiple patch files after the -deh option.


Hats off to...
--------------

Special mention to Erik Sandberg's contribution to EDGE. It's worth a
note that he did a shedload of quality work and made a special effort
to make sure we were GPL legal - something we maintain now.  We do
this since because we have recently removed the software renderer,
we removed about 90% of the work he put into EDGE.

